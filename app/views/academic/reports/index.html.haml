.fr-container
  %h1.fr-h3 Historique des rapports

  .fr-grid-row.fr-mb-3w
    .fr-col-12.fr-col-md-6
      = form_with url: academic_reports_path, method: :get, builder: DsfrFormBuilder do |form|
        .fr-select-group
          = form.label :school_year_id, "Filtrer par année scolaire", class: 'fr-label'
          = form.select :school_year_id,
              [["Toutes les années", ""]] + @school_years.map { |sy| ["#{sy.start_year} - #{sy.end_year}", sy.id] },
              { selected: @selected_school_year_id },
              { class: 'fr-select', onchange: 'this.form.submit()' }

  - if @reports.any?
    .fr-grid-row.fr-grid-row--gutters
      .fr-col-12
        .fr-table.fr-table--bordered
          %table
            %thead
              %tr
                %th{scope: "col"} Date de génération
                %th{scope: "col"} Année scolaire
                %th{scope: "col"} Actions
            %tbody
              - @reports.each do |report|
                %tr
                  %td= l(report.created_at, format: :long)
                  %td= "#{report.school_year.start_year} - #{report.school_year.start_year + 1}"
                  %td
                    = link_to "Voir les statistiques", academic_report_path(report), class: "fr-btn fr-btn--sm"
  - else
    .fr-grid-row.fr-grid-row--gutters
      .fr-col-12
        .fr-alert.fr-alert--info
          %h3.fr-alert__title Aucun rapport disponible
          %p Aucun rapport de statistiques n'a encore été généré.
